liwei

Tcp 字节流, 无边界;  udp, 消息, 报文, 具有边界

不能保证对端接收消息, 对等放接受消息时, 一次读取返回多少个消息.
为什么会粘包:  1 引用层缓冲区拷贝到套接口发送缓冲区中, 应用层缓冲区大于套接口缓冲区大小SQ-SNDBUF, 则可能粘包. 有可能一部分已经发送出去, 另一部分才刚存入发送缓冲区.
              2 tcp 传入端有最大段的限制MSS, 对消息分割
              3 链路层, 最大传输单元, ip层分片.
              4 tcp 流量控制, 拥塞控制.
              5 tcp 延迟发送机制.

如何解决粘包问题: 本质上在应用层维护消息与消息的边界.
              1 定长包
              2 包尾加\r]n (ftp)
              3 包头加上包体长度
              4 更复杂的应用层协议.
              